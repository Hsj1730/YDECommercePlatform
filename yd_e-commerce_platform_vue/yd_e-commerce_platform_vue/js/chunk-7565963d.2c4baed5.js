(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7565963d"],{"25f0":function(t,e,r){"use strict";var o=r("e330"),a=r("5e77").PROPER,i=r("6eeb"),n=r("825a"),l=r("3a9b"),s=r("577e"),c=r("d039"),d=r("ad6d"),g="toString",u=RegExp.prototype,p=u[g],m=o(d),y=c((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),f=a&&p.name!=g;(y||f)&&i(RegExp.prototype,g,(function(){var t=n(this),e=s(t.source),r=t.flags,o=s(void 0===r&&l(u,t)&&!("flags"in u)?m(t):r);return"/"+e+"/"+o}),{unsafe:!0})},8697:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container",staticStyle:{"margin-top":"-20px"}},[r("div",{staticClass:"head-container"},[r("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:t.fnOpenAddCategoryDialog}},[t._v("新增分类")]),r("el-dialog",{attrs:{title:t.title,visible:t.categoryDialogVisible,width:"540px"},on:{"update:visible":function(e){t.categoryDialogVisible=e},close:function(e){return t.fnCloseCategoryDialog("categoryForm")}}},[r("el-form",{ref:"categoryForm",attrs:{model:t.categoryForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"分类名称",prop:"cateName",rules:{required:!0,message:"请填写分类名称",trigger:"blur"}}},[r("el-input",{attrs:{placeholder:"请填写分类名称",autocomplete:"off",clearable:""},model:{value:t.categoryForm.cateName,callback:function(e){t.$set(t.categoryForm,"cateName","string"===typeof e?e.trim():e)},expression:"categoryForm.cateName"}})],1),r("el-form-item",{attrs:{label:"分类图片",prop:"pic"}},[r("material-list",{attrs:{type:"image",num:1,width:150,height:150},model:{value:t.picArr,callback:function(e){t.picArr=e},expression:"picArr"}})],1),r("el-form-item",{attrs:{label:"状态",prop:"isShow"}},[r("el-radio-group",{model:{value:t.categoryForm.isShow,callback:function(e){t.$set(t.categoryForm,"isShow",e)},expression:"categoryForm.isShow"}},[r("el-radio",{attrs:{label:"1"}},[t._v("显示")]),r("el-radio",{attrs:{label:"0"}},[t._v("隐藏")])],1)],1),r("el-form-item",{attrs:{label:"排序号",prop:"sort"}},[r("el-input-number",{attrs:{min:1,max:99,autocomplete:"off"},model:{value:t.categoryForm.sort,callback:function(e){t.$set(t.categoryForm,"sort",e)},expression:"categoryForm.sort"}})],1),r("el-form-item",{attrs:{label:"上级分类",prop:"parentId",rules:[{required:!0,message:"请选择上级分类",trigger:"blur"}]}},[r("tree-select",{staticStyle:{width:"100%"},attrs:{options:t.treeCategory,normalizer:t.normalizer,value:t.value,"flatten-search-results":!0,placeholder:"请选择上级分类"},model:{value:t.categoryForm.parentId,callback:function(e){t.$set(t.categoryForm,"parentId","string"===typeof e?e.trim():e)},expression:"categoryForm.parentId"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){return t.fnCloseCategoryDialog("categoryForm")}}},[t._v("取 消")]),t.isEdit?t._e():r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.fnAddCategory("categoryForm")}}},[t._v("新 增")]),t.isEdit?r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.fnEditCategory("categoryForm")}}},[t._v("保 存")]):t._e()],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,size:"small","tooltip-effect":"dark","row-key":"id",stripe:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[r("el-table-column",{attrs:{label:"名称",align:"center",prop:"cateName"}}),r("el-table-column",{attrs:{label:"状态",align:"center",prop:"isShow"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",["1"===e.row.isShow?r("el-tag",[t._v("显示")]):r("el-tag",{attrs:{type:"info"}},[t._v("隐藏")])],1)]}}])}),r("el-table-column",{attrs:{label:"排序",prop:"sort",align:"center",sortable:""}}),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",sortable:""}}),r("el-table-column",{attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return t.fnOpenEditCategoryDialog(e.row.id)}}}),r("el-popover",{ref:e.row.id,attrs:{placement:"top",width:"180"}},[r("p",[t._v("确定要删除该商品分类吗？")]),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){t.$refs[e.row.id].doClose()}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return t.fnDeleteCategory(e.row.id)}}},[t._v("确定")])],1),r("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"})],1)]}}])},[r("template",{slot:"header"},[r("div",{staticStyle:{display:"inline-block",cursor:"pointer"},on:{click:t.getGoodsCategoryList}},[t._v(" 操作"),r("i",{staticClass:"el-icon-refresh",staticStyle:{"margin-left":"10px"}})])])],2)],1)],1)])},a=[],i=(r("a15b"),r("d3b7"),r("25f0"),r("99af"),r("d81d"),r("159b"),r("b64b"),r("ca17")),n=r.n(i),l=(r("542c"),r("2075")),s={name:"category",components:{treeSelect:n.a,materialList:l["a"]},data:function(){return{tableData:[],treeCategory:[],treeCategory2:[],value:["0"],title:"",categoryDialogVisible:!1,isEdit:!1,picArr:[],categoryForm:{parentId:0,cateName:"",pic:"",isShow:"1",sort:""},disabledId:0}},mounted:function(){this.getGoodsCategoryList()},watch:{picArr:function(t){this.categoryForm.pic=t.join(",")}},methods:{fnDeleteCategory:function(t){var e=this;this.$axios({method:"post",url:"/goodsCategory/deleteGoodsCategory",params:{id:t}}).then((function(t){200===t.data.code&&(e.$message.success("删除成功"),e.getGoodsCategoryList())}))},fnAddCategory:function(t){var e=this;this.$refs[t].validate((function(t){return!!t&&("0"!==e.categoryForm.parentId&&0===e.picArr.length?(e.$message.error("子分类必须选择分类图片"),!1):("0"!==e.categoryForm.parentId?e.categoryForm.pic=e.picArr[0].url:e.categoryForm.pic=null,void e.$axios({method:"post",url:"/goodsCategory/addGoodsCategory",data:e.categoryForm}).then((function(t){200===t.data.code&&(e.$message.success("新增成功"),e.categoryDialogVisible=!1,e.$refs["categoryForm"].resetFields(),e.categoryForm.parentId="0",e.categoryForm.isShow="1",e.getGoodsCategoryList())}))))}))},fnEditCategory:function(t){var e=this;this.$refs[t].validate((function(t){return!!t&&("0"!==e.categoryForm.parentId&&0===e.picArr.length?(e.$message.error("子分类必须选择分类图片"),!1):("0"!==e.categoryForm.parentId?e.categoryForm.pic=e.picArr[0].url:e.categoryForm.pic=null,void e.$axios({method:"post",url:"/goodsCategory/editGoodsCategory",data:e.categoryForm}).then((function(t){200===t.data.code&&(e.$message.success("编辑成功"),e.categoryDialogVisible=!1,e.$refs["categoryForm"].resetFields(),e.categoryForm.parentId="0",e.categoryForm.isShow="1",e.getGoodsCategoryList())}))))}))},normalizer:function(t){return null!=t.children&&"null"!==t.children&&0!==t.children.length||delete t.children,{id:t.id.toString(),label:t.cateName,children:t.children}},fnOpenAddCategoryDialog:function(){this.title="新增分类",this.isEdit=!1,this.categoryDialogVisible=!0,this.categoryForm.parentId="0",this.picArr=[]},fnOpenEditCategoryDialog:function(t){var e=this;this.picArr=[],this.disabledId=t,this.$axios({method:"post",url:"/goodsCategory/getGoodsCategoryById",params:{id:t}}).then((function(t){e.categoryForm=t.data.data.goodsCategory;var r=t.data.data.materialDto;null!==r&&e.picArr.push(r),e.title="编辑分类",e.isEdit=!0,e.categoryDialogVisible=!0,e.treeCategory2=e.treeCategory.concat(),e.treeCategory=e.treeCategory.map((function(t){return e.disableParentId(t)}))}))},disableParentId:function(t){var e=this,r=t.children&&t.children.length>0,o=t.id===this.disabledId;return{id:t.id,cateName:t.cateName,children:r?t.children.map((function(t){return e.disableParentId(t)})):[],isDisabled:o}},fnCloseCategoryDialog:function(t){var e=this;this.$refs[t].resetFields(),Object.keys(this.categoryForm).forEach((function(t){return e.categoryForm[t]=""})),this.categoryForm.parentId="0",this.categoryForm.isShow="1",this.categoryDialogVisible=!1,this.isEdit&&(this.treeCategory=[],this.treeCategory=this.treeCategory2.concat())},getGoodsCategoryList:function(){var t=this;this.$axios({method:"post",url:"/goodsCategory/getGoodsCategoryList"}).then((function(e){var r;r=e.data.data,t.tableData=r,t.treeCategory=t.treeCategoryHandle(r)}))},treeCategoryHandle:function(t){var e=[],r={id:0,cateName:"顶级类目",children:[]};return r.children=t,e.push(r),e}}},c=s,d=r("2877"),g=Object(d["a"])(c,o,a,!1,null,"38d15c46",null);e["default"]=g.exports},"99af":function(t,e,r){"use strict";var o=r("23e7"),a=r("da84"),i=r("d039"),n=r("e8b5"),l=r("861d"),s=r("7b0b"),c=r("07fa"),d=r("8418"),g=r("65f0"),u=r("1dde"),p=r("b622"),m=r("2d00"),y=p("isConcatSpreadable"),f=9007199254740991,h="Maximum allowed index exceeded",b=a.TypeError,C=m>=51||!i((function(){var t=[];return t[y]=!1,t.concat()[0]!==t})),v=u("concat"),F=function(t){if(!l(t))return!1;var e=t[y];return void 0!==e?!!e:n(t)},w=!C||!v;o({target:"Array",proto:!0,forced:w},{concat:function(t){var e,r,o,a,i,n=s(this),l=g(n,0),u=0;for(e=-1,o=arguments.length;e<o;e++)if(i=-1===e?n:arguments[e],F(i)){if(a=c(i),u+a>f)throw b(h);for(r=0;r<a;r++,u++)r in i&&d(l,u,i[r])}else{if(u>=f)throw b(h);d(l,u++,i)}return l.length=u,l}})},b64b:function(t,e,r){var o=r("23e7"),a=r("7b0b"),i=r("df75"),n=r("d039"),l=n((function(){i(1)}));o({target:"Object",stat:!0,forced:l},{keys:function(t){return i(a(t))}})}}]);