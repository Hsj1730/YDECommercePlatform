(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c47f7"],{"3aa4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"head-container",staticStyle:{"margin-top":"-20px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toQuery.apply(null,arguments)}},model:{value:e.query.value,callback:function(t){e.$set(e.query,"value",t)},expression:"query.value"}}),a("el-select",{staticClass:"filter-item",staticStyle:{width:"150px","padding-left":"10px"},attrs:{clearable:"",placeholder:"类型"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},e._l(e.queryTypeOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.toQuery}},[e._v("搜索")]),a("el-button",{staticClass:"filter-item",attrs:{type:"danger",size:"mini",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{prop:"id",align:"center",width:"80",label:"商品id"}}),a("el-table-column",{ref:"table",attrs:{align:"center",width:"150",prop:"image",label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("a",{staticStyle:{color:"#42b983"},attrs:{href:e.row.image,target:"_blank"}},[a("img",{staticClass:"el-avatar",attrs:{src:e.row.image,alt:"点击打开"}})])]}}])}),a("el-table-column",{attrs:{prop:"storeName",align:"center",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"barCode",align:"center",width:"100",label:"商品编码"}}),a("el-table-column",{attrs:{prop:"cateName",align:"center",width:"100",label:"分类名称"}}),a("el-table-column",{attrs:{prop:"price",align:"center",width:"100",label:"商品价格",sortable:""}}),a("el-table-column",{attrs:{prop:"sales",align:"center",width:"100",label:"销量",sortable:""}}),a("el-table-column",{attrs:{prop:"stock",align:"center",width:"100",label:"库存",sortable:""}}),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){return e.onSale(t.row.id,t.row.isShow)}}},["1"===t.row.isShow?a("el-tag",{staticStyle:{cursor:"pointer"}},[e._v("已上架")]):a("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"info"}},[e._v("已下架")])],1)]}}])}),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.edit(t.row.id)}}}),a("el-popover",{ref:t.row.id,attrs:{placement:"top",width:"180"}},[a("p",[e._v("确定删除本条数据吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.$refs[t.row.id].doClose()}}},[e._v("取消")]),a("el-button",{attrs:{loading:e.delLoading,type:"primary",size:"mini"},on:{click:function(a){return e.subDelete(t.row.id)}}},[e._v("确定")])],1),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"})],1)]}}])},[a("template",{slot:"header"},[a("div",{staticStyle:{display:"inline-block",cursor:"pointer"},on:{click:e.toQuery}},[e._v(" 操作"),a("i",{staticClass:"el-icon-refresh",staticStyle:{"margin-left":"10px"}})])])],2)],1),a("el-pagination",{staticStyle:{float:"right","margin-top":"10px","padding-bottom":"10px"},attrs:{"current-page":e.page.current,"page-sizes":[10,20,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("goods-info",{ref:"goodsInfoForm",attrs:{"is-edit":e.isEdit}})],1)},n=[],o=a("8844"),l={name:"unOnSale",components:{goodsInfo:o["default"]},data:function(){return{query:{value:"",type:"storeName"},queryTypeOptions:[{key:"storeName",display_name:"商品名称"},{key:"cateName",display_name:"分类名称"},{key:"barCode",display_name:"商品编码"}],loading:!1,delLoading:!1,isEdit:!0,tableData:[],page:{current:1,pageSize:10,total:0}}},created:function(){this.init()},methods:{init:function(){this.page={current:1,pageSize:10,total:0},this.toQuery()},reset:function(){this.query={value:"",type:"storeName"},this.init()},toQuery:function(){var e=this;this.loading=!0,this.$axios({method:"post",url:"/goods/getGoodsList",data:{query:this.query,pageNum:this.page.current,pageSize:this.page.pageSize,isShow:"0"}}).then((function(t){e.loading=!1,e.tableData=t.data.data.list,e.page.total=t.data.data.total,e.page.current=t.data.data.pageNum,e.page.pageSize=t.data.data.pageSize})).catch((function(){e.loading=!1}))},subDelete:function(e){var t=this;this.delLoading=!0,this.$axios({method:"post",url:"/goods/deleteGoods/"+e}).then((function(e){200===e.data.code&&(t.delLoading=!1,t.$message.success("删除成功"),t.toQuery())})).catch((function(){t.delLoading=!1}))},handleSizeChange:function(e){this.page.pageSize=e,this.toQuery()},handleCurrentChange:function(e){this.page.current=e,this.toQuery()},edit:function(e){var t=this;this.isEdit=!0,this.$refs.goodsInfoForm.dialog=!0,this.$refs.goodsInfoForm.getCateTree(),this.$axios({method:"post",url:"/goods/getGoodsInfo/"+e}).then((function(e){t.$refs.goodsInfoForm.form=e.data.data}))},onSale:function(e,t){var a=this;this.$confirm("确定进行[ ".concat("1"===t?"下架":"上架"," ]操作?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$axios({method:"post",url:"/goods/setGoodsIsShow/"+e,params:{status:"1"===t?"0":"1"}}).then((function(){a.$message({message:"操作成功",type:"success",duration:1e3,onClose:function(){a.toQuery()}})}))}))}}},r=l,s=a("2877"),c=Object(s["a"])(r,i,n,!1,null,"2cac834b",null);t["default"]=c.exports}}]);