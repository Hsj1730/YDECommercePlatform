(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a422c"],{"04c5":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-dialog",{staticStyle:{"padding-bottom":"5vh"},attrs:{"append-to-body":!0,"close-on-click-modal":!1,"before-close":e.cancel,visible:e.dialog,top:"5vh",title:"会员信息",width:"400px"},on:{"update:visible":function(r){e.dialog=r}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"70px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{staticStyle:{width:"270px"},attrs:{disabled:!0},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username","string"===typeof r?r.trim():r)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"用户头像",prop:"userImage"}},[t("material-list",{attrs:{type:"image",num:1,width:150,height:150},model:{value:e.form.userImageArr,callback:function(r){e.$set(e.form,"userImageArr","string"===typeof r?r.trim():r)},expression:"form.userImageArr"}})],1),t("el-form-item",{attrs:{label:"真实姓名",prop:"realName"}},[t("el-input",{staticStyle:{width:"270px"},model:{value:e.form.realName,callback:function(r){e.$set(e.form,"realName","string"===typeof r?r.trim():r)},expression:"form.realName"}})],1),t("el-form-item",{attrs:{label:"用户备注",prop:"mark"}},[t("el-input",{staticStyle:{width:"270px"},model:{value:e.form.mark,callback:function(r){e.$set(e.form,"mark","string"===typeof r?r.trim():r)},expression:"form.mark"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{staticStyle:{width:"270px"},attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",maxLength:"11"},model:{value:e.form.phone,callback:function(r){e.$set(e.form,"phone","string"===typeof r?r.trim():r)},expression:"form.phone"}})],1),t("el-form-item",{attrs:{label:"身份证号",prop:"cardId"}},[t("el-input",{staticStyle:{width:"270px"},attrs:{maxLength:"18"},model:{value:e.form.cardId,callback:function(r){e.$set(e.form,"cardId","string"===typeof r?r.trim():r)},expression:"form.cardId"}})],1),t("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[t("el-input",{staticStyle:{width:"270px"},model:{value:e.form.address,callback:function(r){e.$set(e.form,"address","string"===typeof r?r.trim():r)},expression:"form.address"}})],1)],1),t("div",{staticClass:"dialog-footer",staticStyle:{"margin-right":"20px"},attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("确认")])],1)],1)},o=[],i=(t("d9e2"),t("a15b"),t("2075")),s={name:"memberInfo",components:{materialList:i["a"]},data:function(){var e=this,r=function(r,t,a){""!==t?e.dataValidate.validChinese(t)?a():a(new Error("请输入中文")):a()},t=function(r,t,a){""!==t?e.dataValidate.validCardId(t)?a():a(new Error("请输入正确的身份证")):a()};return{loading:!1,dialog:!1,form:{userId:null,username:"",phone:"",userImage:"",userImageArr:[],realName:"",cardId:"",mark:"",address:""},rules:{realName:[{validator:r}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:this.checkMobile}],cardId:[{validator:t}]}}},watch:{"form.userImageArr":function(e){this.form.userImage=e.join(",")}},methods:{checkMobile:function(e,r,t){if(!this.dataValidate.validateMobile(r))return t(new Error("请输入正确的手机号码"));this.$axios({method:"post",url:"/member/checkMobile/"+(this.form.userId?this.form.userId:0)+"/"+this.form.phone}).then((function(e){return 0!==e.data.data?t(new Error("该手机号已存在")):t()})).catch((function(){return t()}))},doSubmit:function(){var e=this;this.$refs["form"].validate((function(r){return!!r&&(0===e.form.userImageArr.length?(e.$message.error("请添加用户头像"),!1):(e.form.userImage=e.form.userImageArr[0].url,e.loading=!0,void e.$axios({method:"post",url:"/member/saveMemberInfo",data:e.form}).then((function(r){200===r.data.code&&(e.$message.success("保存成功"),e.resetForm(),e.$parent.init()),e.loading=!1})).catch((function(){e.loading=!1}))))}))},cancel:function(){this.resetForm()},resetForm:function(){this.dialog=!1,this.$refs["form"].resetFields(),this.form={userId:null,username:"",phone:"",userImage:"",userImageArr:[],realName:"",cardId:"",mark:"",address:""}}}},l=s,n=t("2877"),m=Object(n["a"])(l,a,o,!1,null,"098cb184",null);r["default"]=m.exports}}]);