(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf371"],{6386:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"head-container",staticStyle:{"margin-top":"-20px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入搜索内容"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toQuery.apply(null,arguments)}},model:{value:t.query.value,callback:function(e){t.$set(t.query,"value",e)},expression:"query.value"}}),a("el-select",{staticClass:"filter-item",staticStyle:{width:"150px","padding-left":"10px"},attrs:{clearable:"",placeholder:"类型"},model:{value:t.query.type,callback:function(e){t.$set(t.query,"type",e)},expression:"query.type"}},t._l(t.queryTypeOptions,(function(t){return a("el-option",{key:t.key,attrs:{label:t.display_name,value:t.key}})})),1),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.toQuery}},[t._v("搜索")]),a("div",{staticStyle:{display:"inline-block",margin:"0 0 0 10px"}},[a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.add}},[t._v("新增")]),a("el-button",{staticClass:"filter-item",attrs:{type:"danger",size:"mini",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v("重置")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,size:"small"}},[a("el-table-column",{attrs:{prop:"id",align:"center",width:"80",label:"商品id"}}),a("el-table-column",{ref:"table",attrs:{align:"center",width:"150",prop:"image",label:"商品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{color:"#42b983"},attrs:{href:t.row.image,target:"_blank"}},[a("img",{staticClass:"el-avatar",attrs:{src:t.row.image,alt:"点击打开"}})])]}}])}),a("el-table-column",{attrs:{prop:"storeName",align:"center",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"barCode",align:"center",width:"100",label:"商品编码"}}),a("el-table-column",{attrs:{prop:"cateName",align:"center",width:"100",label:"分类名称"}}),a("el-table-column",{attrs:{prop:"price",align:"center",width:"100",label:"商品价格",sortable:""}}),a("el-table-column",{attrs:{prop:"sales",align:"center",width:"100",label:"销量",sortable:""}}),a("el-table-column",{attrs:{prop:"stock",align:"center",width:"100",label:"库存",sortable:""}}),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{on:{click:function(a){return t.onSale(e.row.id,e.row.isShow)}}},["1"===e.row.isShow?a("el-tag",{staticStyle:{cursor:"pointer"}},[t._v("已上架")]):a("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"info"}},[t._v("已下架")])],1)]}}])}),a("el-table-column",{attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},on:{click:function(a){return t.attr(e.row.id)}},slot:"reference"},[t._v("规格属性")]),a("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini","split-button":"",type:"primary",trigger:"click"}},[t._v(" 操作 "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row.id)}}},[t._v("编辑")])],1),a("el-dropdown-item",[a("el-popover",{ref:e.row.id,attrs:{placement:"top",width:"180"}},[a("p",[t._v("确定删除本条数据吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.$refs[e.row.id].doClose()}}},[t._v("取消")]),a("el-button",{attrs:{loading:t.delLoading,type:"primary",size:"mini"},on:{click:function(a){return t.subDelete(e.row.id)}}},[t._v("确定")])],1),a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"},[t._v("删除")])],1)],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.editC(e.row)}}},[t._v("开启拼团")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.editD(e.row)}}},[t._v("开启秒杀")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return t.editE(e.row)}}},[t._v("开启砍价")])],1)],1)],1)]}}])},[a("template",{slot:"header"},[a("div",{staticStyle:{display:"inline-block",cursor:"pointer"},on:{click:t.toQuery}},[t._v(" 操作"),a("i",{staticClass:"el-icon-refresh",staticStyle:{"margin-left":"10px"}})])])],2)],1),a("el-pagination",{staticStyle:{float:"right","margin-top":"10px","padding-bottom":"10px"},attrs:{"current-page":t.page.current,"page-sizes":[10,20,50,100],"page-size":t.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("goods-info",{ref:"goodsInfoForm",attrs:{"is-edit":t.isEdit}})],1)},n=[],o=a("8844"),r={name:"onSale",components:{goodsInfo:o["default"]},data:function(){return{query:{value:"",type:"storeName"},queryTypeOptions:[{key:"storeName",display_name:"商品名称"},{key:"cateName",display_name:"分类名称"},{key:"barCode",display_name:"商品编码"}],loading:!1,delLoading:!1,isEdit:!1,tableData:[],page:{current:1,pageSize:10,total:0}}},created:function(){this.init()},methods:{add:function(){this.isEdit=!1,this.$refs.goodsInfoForm.dialog=!0,this.$refs.goodsInfoForm.getCateTree()},edit:function(t){var e=this;this.isEdit=!0,this.$refs.goodsInfoForm.dialog=!0,this.$refs.goodsInfoForm.getCateTree(),this.$axios({method:"post",url:"/goods/getGoodsInfo/"+t}).then((function(t){e.$refs.goodsInfoForm.form=t.data.data}))},onSale:function(t,e){var a=this;this.$confirm("确定进行[ ".concat("1"===e?"下架":"上架"," ]操作?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$axios({method:"post",url:"/goods/setGoodsIsShow/"+t,params:{status:"1"===e?"0":"1"}}).then((function(){a.$message({message:"操作成功",type:"success",duration:1e3,onClose:function(){a.toQuery()}})}))}))},init:function(){this.page={current:1,pageSize:10,total:0},this.toQuery()},reset:function(){this.query={value:"",type:"storeName"},this.init()},toQuery:function(){var t=this;this.loading=!0,this.$axios({method:"post",url:"/goods/getGoodsList",data:{query:this.query,pageNum:this.page.current,pageSize:this.page.pageSize,isShow:"1"}}).then((function(e){t.loading=!1,t.tableData=e.data.data.list,t.page.total=e.data.data.total,t.page.current=e.data.data.pageNum,t.page.pageSize=e.data.data.pageSize})).catch((function(){t.loading=!1}))},handleSizeChange:function(t){this.page.pageSize=t,this.toQuery()},handleCurrentChange:function(t){this.page.current=t,this.toQuery()}}},l=r,s=a("2877"),c=Object(s["a"])(l,i,n,!1,null,"005e3b8d",null);e["default"]=c.exports}}]);