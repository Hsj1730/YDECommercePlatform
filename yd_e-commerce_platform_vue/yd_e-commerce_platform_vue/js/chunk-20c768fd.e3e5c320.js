(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20c768fd","chunk-2d0d437c"],{"5fa6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"before-close":e.cancel,visible:e.dialog,title:"余额修改",width:"400px"},on:{"update:visible":function(t){e.dialog=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,size:"small","label-width":"70px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{staticStyle:{width:"270px"},attrs:{disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}})],1),n("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[n("el-input",{staticStyle:{width:"270px"},attrs:{disabled:!0},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"===typeof t?t.trim():t)},expression:"form.phone"}})],1),n("el-form-item",{attrs:{label:"用户余额",prop:"nowMoney"}},[n("el-input-number",{attrs:{min:0,max:99999999.99,precision:2,controls:!1,disabled:!0},model:{value:e.form.nowMoney,callback:function(t){e.$set(e.form,"nowMoney",t)},expression:"form.nowMoney"}})],1),n("el-form-item",{attrs:{label:"修改余额",prop:"el-radio-grouptype"}},[n("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-radio",{attrs:{label:"1"}},[e._v("增加")]),n("el-radio",{attrs:{label:"2"}},[e._v("减少")])],1)],1),n("el-form-item",{attrs:{label:"修改余额",prop:"modifyMoney"}},[n("el-input-number",{attrs:{min:0,max:99999999.99,precision:2,step:10,"controls-position":"right"},model:{value:e.form.modifyMoney,callback:function(t){e.$set(e.form,"modifyMoney",t)},expression:"form.modifyMoney"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("确认")])],1)],1)},o=[],r={name:"moneyModify",data:function(){return{loading:!1,dialog:!1,form:{userId:null,username:"",phone:"",type:"1",nowMoney:0,modifyMoney:0}}},methods:{doSubmit:function(){var e=this;this.loading=!0,this.$axios({method:"post",url:"/member/modifyMemberBalance/"+this.form.userId,data:{type:this.form.type,modifyMoney:this.form.modifyMoney}}).then((function(t){e.loading=!1,200===t.data.code?(e.$message.success("余额修改成功"),e.dialog=!1,e.resetForm(),e.$parent.init()):e.queryBalance(e.form.userId)})).catch((function(){e.loading=!1}))},cancel:function(){this.dialog=!1,this.resetForm()},resetForm:function(){this.$refs["form"].resetFields(),this.form={userId:null,username:"",phone:"",type:"1",nowMoney:0,modifyMoney:0}},queryBalance:function(e){var t=this;this.loading=!0,this.$axios({method:"post",url:"/member/getMemberBalance/"+e}).then((function(e){var n=e.data.data;t.form={userId:n.userId,username:n.username,phone:n.phone,type:t.form.type,nowMoney:n.nowMoney,modifyMoney:t.form.modifyMoney},t.loading=!1})).catch((function(){t.loading=!1}))}}},i=r,l=n("2877"),s=Object(l["a"])(i,a,o,!1,null,"da47e754",null);t["default"]=s.exports},f2f4:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container",staticStyle:{"margin-top":"-20px"}},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toQuery.apply(null,arguments)}},model:{value:e.query.value,callback:function(t){e.$set(e.query,"value",t)},expression:"query.value"}}),n("el-select",{staticClass:"filter-item",staticStyle:{width:"150px","padding-left":"10px"},attrs:{clearable:"",placeholder:"类型"},model:{value:e.query.type,callback:function(t){e.$set(e.query,"type",t)},expression:"query.type"}},e._l(e.queryTypeOptions,(function(e){return n("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.toQuery}},[e._v("搜索")]),n("el-button",{staticClass:"filter-item",attrs:{type:"danger",size:"mini",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small"}},[n("el-table-column",{attrs:{prop:"userId",align:"center",width:"60",label:"用户id"}}),n("el-table-column",{attrs:{prop:"username",align:"center",label:"用户名"}}),n("el-table-column",{ref:"table",attrs:{align:"center",width:"150",prop:"userImage",label:"用户头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("a",{staticStyle:{color:"#42b983"},attrs:{href:e.row.userImage,target:"_blank"}},[n("el-avatar",{attrs:{src:e.row.userImage}})],1)]}}])}),n("el-table-column",{attrs:{prop:"phone",align:"center",label:"手机号码"}}),n("el-table-column",{attrs:{prop:"nowMoney",align:"center",label:"用户余额"}}),n("el-table-column",{attrs:{prop:"enable",label:"状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{on:{click:function(n){return e.onEnable(t.row.userId,t.row.enable)}}},["1"===t.row.enable?n("el-tag",{staticStyle:{cursor:"pointer"}},[e._v("正常")]):n("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"'info'"}},[e._v("禁用")])],1)]}}])}),n("el-table-column",{attrs:{prop:"payCount",align:"center",label:"购买次数"}}),n("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建日期"}}),n("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return e.edit(t.row.userId)}},slot:"reference"}),n("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini","split-button":"",type:"primary",trigger:"click"}},[e._v(" 操作 "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.moneyModify(t.row.userId)}}},[e._v("修改余额")])],1),n("el-dropdown-item",[n("el-popover",{ref:t.row.userId,attrs:{placement:"top",width:"180"}},[n("p",[e._v("确定删除本条数据吗？")]),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){e.$refs[t.row.userId].doClose()}}},[e._v("取消")]),n("el-button",{attrs:{loading:e.delLoading,type:"primary",size:"mini"},on:{click:function(n){return e.subDelete(t.row.userId)}}},[e._v("确定")])],1),n("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"},[e._v("删除")])],1)],1)],1)],1)]}}])},[n("template",{slot:"header"},[n("div",{staticStyle:{display:"inline-block",cursor:"pointer"},on:{click:e.toQuery}},[e._v(" 操作"),n("i",{staticClass:"el-icon-refresh",staticStyle:{"margin-left":"10px"}})])])],2)],1),n("el-pagination",{staticStyle:{float:"right","margin-top":"10px","padding-bottom":"10px"},attrs:{"current-page":e.page.current,"page-sizes":[10,20,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),n("money-modify",{ref:"moneyModify"}),n("member-info",{ref:"memberInfo"})],1)},o=[],r=n("5fa6"),i=n("04c5"),l={name:"member",components:{moneyModify:r["default"],memberInfo:i["default"]},data:function(){return{query:{value:"",type:"username"},queryTypeOptions:[{key:"username",display_name:"用户名"},{key:"phone",display_name:"手机号"}],loading:!1,delLoading:!1,isEdit:!1,tableData:[],page:{current:1,pageSize:10,total:0}}},created:function(){this.init()},methods:{subDelete:function(e){var t=this;this.delLoading=!0,this.$axios({method:"post",url:"/member/deleteMember/"+e}).then((function(e){200===e.data.code&&(t.$message.success("删除成功"),t.delLoading=!1,t.toQuery())})).catch((function(){t.delLoading=!1}))},edit:function(e){var t=this;this.$refs.memberInfo.dialog=!0,this.$axios({method:"post",url:"/member/getMemberInfo/"+e}).then((function(e){t.$refs.memberInfo.form=e.data.data}))},onEnable:function(e,t){var n=this;this.$confirm("确定进行[ ".concat("1"===t?"禁用":"启用"," ]操作?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$axios({method:"post",url:"/member/setMemberStatus/"+e,params:{enable:"1"===t?"0":"1"}}).then((function(){n.$message({message:"操作成功",type:"success",duration:1e3,onClose:function(){n.toQuery()}})}))}))},moneyModify:function(e){this.$refs.moneyModify.queryBalance(e),this.$refs.moneyModify.dialog=!0},init:function(){this.page={current:1,pageSize:10,total:0},this.toQuery()},reset:function(){this.query={value:"",type:"username"},this.init()},toQuery:function(){var e=this;this.loading=!0,this.$axios({method:"post",url:"/member/getMemberList",data:{query:this.query,pageNum:this.page.current,pageSize:this.page.pageSize}}).then((function(t){e.loading=!1,e.tableData=t.data.data.list,e.page.total=t.data.data.total,e.page.current=t.data.data.pageNum,e.page.pageSize=t.data.data.pageSize})).catch((function(){e.loading=!1}))},handleSizeChange:function(e){this.page.pageSize=e,this.toQuery()},handleCurrentChange:function(e){this.page.current=e,this.toQuery()}}},s=l,c=n("2877"),u=Object(c["a"])(s,a,o,!1,null,"9ff4c8ce",null);t["default"]=u.exports}}]);