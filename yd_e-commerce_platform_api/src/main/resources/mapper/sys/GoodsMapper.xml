<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hsjnb.yd_ecommerce_platform_api.mapper.sys.GoodsMapper">

    <select id="getGoodsList" parameterType="string" resultType="goods">
        select a.*,b.cate_name from yd_goods a left join yd_goods_category b on b.id = a.cate_id
        where a.effective = '1' and a.is_show = #{isShow} and b.effective = '1'
        <if test="type = 'storeName'">
            and a.store_name like concat('%', #{type}, '%')
        </if>
        <if test="type = 'cateName'">
            and b.cate_name like concat('%', #{type}, '%')
        </if>
    </select>

    <update id="setGoodsIsShow">
        update yd_goods set is_show = #{status} where id = #{id}
    </update>

</mapper>
